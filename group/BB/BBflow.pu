@startuml
start

:商品選択・カートに追加;
:顧客がWebサイトで注文;
:配送先情報入力;
:支払い（クレジットカード）実行;

if (決済成功?) then (yes)
  :注文情報をDBに登録;
  :注文確認メール送信;
else (no)
  :エラーメッセージ表示;
  stop
endif

:管理者が注文確認;
:在庫チェック・梱包作業;
:ステータス更新「出荷準備中」;

:発送処理（伝票番号登録）;
:ステータス更新「発送済み」;
:顧客に発送完了メール送信;
:配送業者による配達;
:配達完了;

if (返品申請 10日以内?) then (yes)
  :顧客が返品申請;
  :管理者が返品受付;
  :顧客が商品返送（送料負担）;
  :管理者が返品確認;
  :返金処理（クレジットカード）;
  :ステータス更新「返品完了」;
else (no)
  :処理終了;
endif

stop
@enduml
